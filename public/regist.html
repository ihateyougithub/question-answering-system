<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <title>注册</title>
</head>

<body>
    <nav class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
                <div class="navbar-brand">
                    智游问答系统
                </div>
            </div>
            <div>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="login.html">
                          <span class="glyphicon glyphicon-plus"></span>  登陆
                       </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <form action="">
            <div class="form-group">
                <label for="">账号</label>
                <input id="user" type="text" placeholder="请输入账号"
                 name="user" class="form-control">
            </div>

            <div class="form-group">
                <label for="">密码</label>
                <input id="psw" type="password" placeholder="请输入密码"
                 name='psw' class="form-control">
            </div>

            <div class="form-group">
                <label for="">密码</label>
                <input id="again" type="password" placeholder="请重复密码"
                name='again' class="form-control">
            </div>
            
            <div class="form-group">
                <button class="btn btn-primary form-control">提交注册信息</button>
            </div>
        </form>
    </div>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
        $('button').click(function(e){

           
            var user = $('#user').val();
            
            var psw = $('#psw').val();

            var again = $('#again').val()

            if(user.length < 6)
            {
                alert('账号不能小于6位');
                return;
            }

            if(psw != again)
            {
                alert('两次密码输入不一致');

                return;
            }

            if(psw.length < 6)
            {
                alert('密码长度不能小于6位');

                return;
            }
          
            $.post('/regist',{name:user,psw:psw},
            function(data){
                console.log(data)

                if(data.status == 200)
                {
                    location.href = 'login.html'
                }
                else 
                {
                    alert(data.message);
                }
            })

            // 阻止默认事件发生
            e.preventDefault();
        })
    </script>
    
</body>

</html>